if getgenv().AutoRejoinTriggered then
    -- Auto rejoin detected: clear flag to avoid duplication
    getgenv().AutoRejoinTriggered = nil
    local success, result = pcall(function()
        fireproximityprompt(workspace:WaitForChild("Trophy").ProxHold.ProximityPrompt, 1, Enum.KeyCode.E, game.Players.LocalPlayer)
    end)
    print(success, result)
    wait(1)  -- wait 1 second before teleporting again
    
    --getgenv().AutoRejoinTriggered = true
    --game:GetService("TeleportService"):Teleport(game.PlaceId, game.Players.LocalPlayer)
else
    fireproximityprompt(workspace:WaitForChild("Trophy").ProxHold.ProximityPrompt, 1, Enum.KeyCode.E, game.Players.LocalPlayer)
    wait(1)  -- wait 1 second before teleporting again
    
    getgenv().AutoRejoinTriggered = true
    game:GetService("TeleportService"):Teleport(game.PlaceId, game.Players.LocalPlayer)
end
